10 April 2020

Changes made in 7.4-dev branch of the fork:
network_vis_controller.js collects quite a lot of data in $scope to
keep it between calls (maybe there's a better place? couldn't say):
- colorDicc and usedColors
- nextId (instead of i), to support cases where it refreshes while the
  network is still being constructed
- savedDataNodes: dictionary of nodes by our ID, so we can easily
  update colors when the node state changes
- nodesDataSet: visjs DataSet that's input to the network
  visualization
- savedNetwork: the network itself, also from visjs.
- colorOptions: new dictionary that installs a fixed seed for
  randomColor.

Color generation:
In the long run, we want a way to set the colors from outside. For
now, the colorOptions "global" has a seed and a count (always 1). When
it's passed to randomColor, we get an array with a color in it
(vs. just the color), and the seed gets incremented. This ensures, not
that the same state will have the same color run-to-run, but that the
color set will always be the same, and the color for a given state
won't change during a refresh.

Incremental display:
Applies only for node-relation networks, because that's what we
use. If the network on entry is the same size, then we don't
reconstruct everything. Instead, nodes whose color or size have
changed are tracked; ultimately we push an update to the DataSet,
which causes the display to update.

TODO:
There is no way to identify a completely new network that needs
redrawing, if it's the same size.
There is no way to specify the desired colors, which would be very
nice. Can reverse-engineer the random seed to get desired values, but
that's not enough: we want to say, "Infected" is orange, every single
time, and that's not an option that I've figured out yet.
There are cases where the display ends up blank; when that happens,
refresh won't fix it. Not sure what causes the blanking. Ideally,
maybe the Refresh button would actually redraw, while time-based
refreshes would be incremental. Not sure Kibana supports that.
Would be nice to move into a new version of Kibana.
